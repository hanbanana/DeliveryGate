

<div style="margin-left: 200px; margin-right: 200px">
  <table class="table table-sm table-hover" data-toggle="table"  data-search="true">
    
    <thead>
      <tr>
        <th scope="col" data-sortable="true">ID#</th>
        <th scope="col">B/L</th>
        <th scope="col">Terminal Name</th>
        <th scope="col">Container No.</th>
        <th scope="col">Vassel No.</th>
        <th scope="col">ETA</th>
        <th scope="col">Weight</th>
        <th scope="col">Seal No.</th>
        <th scope="col">Delivery Location</th>
        <th scope="col">Status</th>
        <th scope="col">Return</th>
        <th scope="col">Close</th>
        <th scope="col">Delete</th>



      </tr>
    </thead>
    
    <tbody>
      {{#each deliveryOrder}}
      <tr>
        <td>{{this.id}}</td>
        <td>{{this.BL}}</td>
        <td>{{this.Terminal_Name}}</td>
        <td>{{this.Container_No}}</td>
        <td>{{this.Vassel_No}}</td>
        <td>{{this.ETA}}</td>
        <td>{{this.Weight}}</td>
        <td>{{this.Seal_No}}</td>
        <td>{{this.Delivery_Location}}</td>
        <td>{{this.Status_}}</td>
        <td>{{this.Return_}}</td>
        <td>{{this.Close_}}</td>
        <td><button data-planid="{{this.id}}" class="delplan">Delete</button></td>
{{/each}}

      </tr>

    </tbody>
    
  </table>

</div>


<br>
<h1>Delivery Order</h1>

<ul>
  {{#each deliveryOrder}}
  <li>
    <p>
      {{this.id}}. {{this.BL}}

      <button data-planid="{{this.id}}" class="delplan">Delete Plan!</button>
    </p>
  </li>
  {{/each}}
</ul>

<h2>Create a Plan</h2>
<form id="createplan" class="button-size">
  <textarea type="text" name="BL" id="BL"></textarea>
  <textarea type="text" name="Terminal_Name" id="Terminal_Name"></textarea>
  <textarea type="text" name="Container_No" id="Container_No"></textarea>
  <textarea type="text" name="Vassel_No" id="Vassel_No"></textarea>
  <textarea type="text" name="ETA" id="ETA"></textarea>
  <textarea type="text" name="Weight" id="Weight"></textarea>
  <textarea type="text" name="Seal_No" id="Seal_No"></textarea>
  <textarea type="text" name="Delivery_Location" id="Delivery_Location"></textarea>
  <textarea type="text" name="Status_" id="Status_"></textarea>
  <textarea type="text" name="Return_" id="Return_"></textarea>
  <textarea type="text" name="Close_" id="Close_"></textarea>
  <button type="submit">Save Plan!</button>
</form>
{{!-- <form id="createplan" class="button-size">
  <textarea type="text" name="Terminal_Name"></textarea>
  <button type="submit">Save Plan!</button>
</form>
<form id="createplan" class="button-size">
  <textarea type="text" name="Vassel_No"></textarea>
  <button type="submit">Save Plan!</button>
</form>
<form id="createplan" class="button-size">
  <textarea type="text" name="ETA"></textarea>
  <button type="submit">Save Plan!</button>
</form>
<form id="createplan" class="button-size">
  <textarea type="text" name="Weight"></textarea>
  <button type="submit">Save Plan!</button>
</form>
<form id="createplan" class="button-size">
  <textarea type="text" name="Seal_No"></textarea>
  <button type="submit">Save Plan!</button>
</form>
<form id="createplan" class="button-size">
  <textarea type="text" name="Delivery_Location"></textarea>
  <button type="submit">Save Plan!</button>
</form>
<form id="createplan" class="button-size">
  <textarea type="text" name="Status_"></textarea>
  <button type="submit">Save Plan!</button>
</form>
<form id="createplan" class="button-size">
  <textarea type="text" name="Return_"></textarea>
  <button type="submit">Save Plan!</button>
</form>
<form id="createplan" class="button-size">
  <textarea type="text" name="Close_"></textarea>
  <button type="submit">Save Plan!</button>
</form> --}}

<h2>Update a Plan</h2>
<form id="updateplan" class="button-size">
  <select name="id">
    {{#each plans}}
    <option value="{{this.id}}">{{this.BL}}</option>
    {{/each}}
  </select>
  <textarea type="text" name="BL" placeholder="BL"></textarea>
  <button type="submit">Update Plan!</button>
</form>

<script type="text/javascript">

  $(".delplan").on("click", function (event) {
    var id = $(this).data("planid");

    // Send the DELETE request.
    $.ajax("/todos/" + id, {
      type: "DELETE"
    }).then(
      function () {
        console.log("deleted id ", id);
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });

  $("#createplan").on("submit", function (event) {
    // Make sure to preventDefault on a submit event.
    event.preventDefault();

    var newPlan = {
      BL: $("#BL").val().trim(),
      Terminal_Name: $("#Terminal_Name").val().trim(),
      Container_No: $("#Container_No").val().trim(),      
      Vassel_No: $("#Vassel_No").val().trim(),
      ETA: $("#ETA").val().trim(),
      Weight: $("#Weight").val().trim(),
      Seal_No: $("#Seal_No").val().trim(),
      Delivery_Location: $("#Delivery_Location").val().trim(),
      Status_: $("#Status_").val().trim(),
      Return_: $("#Return_").val().trim(),
      Close_: $("#Close_").val().trim()
    };

    // Send the POST request.
    $.ajax("/todos", {
      type: "POST",
      data: newPlan
    }).then(
      function () {
        console.log("created new plan");
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });

  $("#updateplan").on("submit", function (event) {
    // Make sure to preventDefault on a submit event.
    event.preventDefault();

    var id = $("[name=id]").val().trim();

    var updatedPlan = {
      plan: $("#updateplan [name=BL]").val().trim()
    };

    // Send the PUT request.
    $.ajax("/todos/" + id, {
      type: "PUT",
      data: updatedPlan
    }).then(
      function () {
        console.log("updated id ", id);
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });


</script>